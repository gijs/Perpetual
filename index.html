<!DOCTYPE html> 
<html>
    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="content-type">
        <title>perpetual</title>
        
        <link href='http://fonts.googleapis.com/css?family=Terminal+Dosis+Light' rel='stylesheet' type='text/css'>
        <link href="static/css/style.css" rel="stylesheet" type="text/css">

        <script src="lib/utils/u.js"></script>
        
        <script src="lib/math/geo.js"></script>
        <script src="lib/math/Vec2.js"></script>
        
        <script src="lib/core/Timer.js"></script>
        
        <script src="lib/threejs/Three.js"></script>

        <script src="lib/datastructures/scenegraph/BaseNode.js"></script>
        <script src="lib/datastructures/scenegraph/SceneNode.js"></script>
        <script src="lib/datastructures/scenegraph/Node.js"></script>

        <script src="lib/datastructures/quadtree/QuadTree.js"></script>
        
        <script src="test/scenegraph.js"></script>
        <script src="test/quadtree.indexing.js"></script>
        <script src="test/quadtree.ball-collisions.js"></script>
        <script src="test/quadtree.ball-collisions-brute.js"></script>
        <script src="test/threejs.simple.js"></script>
        <script src="test/webgl.simple.js"></script>
        <script>
            function ready() {

                var list = document.getElementById('test-cases'),
                    des = document.getElementById('test-desc');

                for (var test in tests) {
                    var el = document.createElement('li'),
                        a = document.createElement('a'),
                        desc = tests[test].desc;


                    test = tests[test];

                    a.innerHTML = test.name;
                    a.onclick = (function(test) { 
                        var desc = test.desc,
                            test = test.test;

                        return function() {
                            test();
                            des.innerHTML = desc || "";
                    }})(test);

                    el.appendChild(a);
                    list.appendChild(el);
                }
                var menu = document.getElementById('menu');
                var toggle = document.createElement('a');
                toggle.id = "toggle";
                toggle.innerHTML = "+";
                toggle.onclick = function(){
                    if(!this.menu_hidden) {
                        this.menu_hidden = true;
                        toggle.style.top = (window.innerHeight - 22) + "px";
                        menu.style.top = window.innerHeight + "px";
                        menu.style.overflow = "hidden";
                    } else {
                        this.menu_hidden = false;
                        toggle.style.top = "40px";
                        menu.style.top = "60px";
                        menu.style.overflow = "auto";
                    }
                }
                document.body.appendChild(toggle);

            }

            function stats() {
                var script=document.createElement('script');
                script.type='text/javascript';
                script.src='http://github.com/mrdoob/stats.js/raw/master/build/Stats.js';
                document.body.appendChild(script);
                script=document.createElement('script');
                script.innerHTML='var interval=setInterval(function(){if(typeof Stats==\'function\'){clearInterval(interval);var stats=new Stats();stats.domElement.style.position=\'fixed\';stats.domElement.style.left=\'15px\';stats.domElement.style.top=\'15px\';document.body.appendChild(stats.domElement);setInterval(function(){stats.update();},1000/60);}},100);';
                document.body.appendChild(script);
            }
        </script>
    </head>
    <body onload="ready();">
        <div id="container"></div>
        <div id="menu">
            <h1 id="logo">perpetual</h1>
            <ul id="test-cases"></ul>
            <div id="test-desc">
                Meet perpetual - a perpetual endeavour to create something I'm going to be happy about. Choose a test from above and enjoy. Feel free to browse the code, copy, extend, or do whatever pleases you.
            </div>
            <a id="stats" onclick="stats();">Show Mr. doob's <strong>fps counter</strong></a>
            <a id="github_url" target="_blank" href="https://github.com/i-eat-brainz/Perpetual">check it out on github</a>
        </div>
    </body>
</html>